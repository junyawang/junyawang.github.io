if(!rentmoola){var rentmoola={}}rentmoola.forms=(function(){var c={hidden:"hidden",formErrors:"form-errors",field:"field",fieldError:"field-error",labelError:"label-error",messageError:"message-error",originalLabel:"data-label-orig",errorPrefix:"error-message-",errorList:"error-list",errorMessage:"error-message",errorMessageBox:"message-box-error",content:"message-box-content"};var b={first_name:"We need a valid first name",last_name:"We need a valid last name",business_name:"We need a valid business name",street1:"We need a valid street address",city:"We need a valid city",state:"We need a valid state",postal_code:"We need a valid ZIP code",circa:"We need your birthday",ssn_4:"We need the last four digits of your SSN",ssn:"We need the full nine digits of your SSN",routing_number:"We need a valid routing number",account_number:"We need a valid account number",ein:'Federal Tax ID must contain 9 digits. Otherwise select "No".'};var e={ssn:function(j){var h=0;for(var g=0;g<j.length;++g){if(j[g]>="0"&&j[g]<="9"){h+=1}else{if(j[g]!=="-"){return false}}}return h===9}};function d(g){return $("input[name='"+g+"'], select[name='"+g+"'], textarea[name='"+g+"']")}function a(g){return $('label[for="'+g+'"]')}function f(h,k){for(var j in h){var g=h[j];for(var l=0;l<g.length;++l){if(g[l]===k){return $(j)}}}return null}return{initValidation:function(h,k,i,g){rentmoola.forms.addCustomRules();var j=$.extend(true,{},b);$.extend(true,j,i||{});return h.validate({showErrors:function(l,m){if(m.length>0){$(m).each(function(o,n){rentmoola.forms.addInlineValidationError(g,n)})}else{$(this.successList).each(function(n,o){rentmoola.forms.removeInlineValidationError(g,o)})}},highlight:function(l){rentmoola.forms.toggleParentFieldError($(l),true)},unhighlight:function(l){rentmoola.forms.toggleParentFieldError($(l),false)},rules:k,messages:j})},removeValidation:function(g){g.data("validator")},addCustomRules:function(){$.validator.addMethod("phoneUS",function(h,i){h=h.replace(/\s+/g,"");return this.optional(i)||h.length>9&&h.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number");$.validator.addMethod("employerIdentificationNumber",function(i,h){i=i.replace(/-/ig,"");return this.optional(h)||/^\d{9}$/.test(i)},"EIN must contain 9 digits and an optional dash");for(var g in e){$.validator.addMethod(g,e[g])}},toggleParentFieldError:function(g,h){var i=g.parents("."+c.field);(h)?i.addClass(c.fieldError):i.removeClass(c.fieldError)},addAPIErrors:function(g,i){var h=this;$.each(i,function(n,m){var l=d(m.field_name);rentmoola.forms.toggleParentFieldError(l,true);var j=l.attr("name");var k=f(g,j);if(k){h.addErrorMessage(k,j,m.message)}})},addInlineValidationError:function(h,k){var j=$(k.element);rentmoola.forms.toggleParentFieldError(j,true);var g=j.attr("name");var i=f(h,g);if(i){this.addErrorMessage(i,g,k.message)}},addErrorMessage:function(g,k,m){var l=$("."+c.errorList,g);var j=$("."+c.errorMessage,g);if($("#"+rentmoola.forms.getErrorMessageId_(k)).length===0){if(m.length>0){var i=$("<li>"+m+"</li>");i.attr("id",rentmoola.forms.getErrorMessageId_(k));l.append(i)}}else{$("#"+rentmoola.forms.getErrorMessageId_(k)).text(m)}var h=$("li",l);if(h.length>1){j.removeClass(c.hidden)}else{j.addClass(c.hidden)}g.removeClass(c.hidden)},removeInlineValidationError:function(g,m){var l=$(m);rentmoola.forms.toggleParentFieldError(l,false);var k=l.attr("name");var h=f(g,k);if(h){$("#"+rentmoola.forms.getErrorMessageId_(k)).remove();var i=$("."+c.errorList+" li",h);var j=$("."+c.errorMessage,h);if(i.length>=1){h.removeClass(c.hidden)}else{h.addClass(c.hidden)}if(i.length>1){j.removeClass(c.hidden)}else{j.addClass(c.hidden)}}},clearError:function(){var g=$("."+c.errorMessageBox);$("."+c.errorList,g).html("");g.addClass(c.hidden)},getErrorMessageId_:function(g){return c.errorPrefix+g.replace(/\[/g,"_").replace(/\]/g,"_")},showInlineErrors:function(g,i){var h=this;if(g){if(i&&i.length>0){$.each(i,function(k,j){h.showInlineError(d(j.field_name),j.message)})}}else{$("."+c.fieldError).each(function(k,j){var l=$("input, select, textarea",j);h.clearInlineError(l)})}},clearInlineErrors:function(){this.showInlineErrors(false)},showInlineError:function(j,k){if(j){rentmoola.forms.toggleParentFieldError(j,true);var g=a(j.attr("id"));if(g.size()){if(!g.attr(c.originalLabel)){g.attr(c.originalLabel,g.text())}g.addClass(c.labelError);g.text(k)}else{var i=j.siblings("."+c.messageError);if(i.length){i.text(k)}else{var h=$("<span/>");h.addClass(c.messageError).text(k);j.after(h)}}}},clearInlineError:function(h){if(h){rentmoola.forms.toggleParentFieldError(h,false);h.siblings("."+c.messageError).remove();var g=a(h.attr("id"));if(g.size()){g.removeClass(c.labelError);g.text(g.attr(c.originalLabel));g.removeAttr(c.originalLabel)}}},showFlashMessage:function(h,g,i){var j=$(g);if(h){$("."+c.content,j).html(i);j.fadeIn("fast")}else{j.fadeOut("fast")}}}})();