
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Org Name - Team Activities</title>

    <link rel="shortcut icon" href="img/favicon.ico" />

    <!-- CSS -->
    <link href="css/normalize.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-tokenfield.min.css" rel="stylesheet" type="text/css">
    <link href="css/tokenfield-typeahead.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link href="css/custom.css" rel="stylesheet" type="text/css">
    <link href="css/media_query.css" rel="stylesheet" type="text/css">

    <!-- JS -->
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-tokenfield.min.js"></script>

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600' rel='stylesheet' type='text/css'>
</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
    
    <!-- Navbar Main -->
    <nav class="navbar navbar-default navbar-main navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <!-- Toggle -->
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <!-- Logo -->
                <a class="navbar-brand page-scroll" href="index.html">
                    <img class="img-logo" src="img/org_logo.jpg">
                </a>
            </div>

            <!-- Menus -->
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-left">
                    <li><a href="index.html">Basecamp Networks</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="page-scroll navbar-active">
                        <a href="index.html">Home</a>
                    </li>
                    <li class="page-scroll">
                        <a href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Craig Ganssle <span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="account.html">My Account</a></li>
                            <li><a href="signin_org.html">Switch Org (no other orgs signed in)</a></li>
                            <li><a href="switch_org.html">Switch Org (has other orgs signed in)</a></li>
                            <li class="divider"></li>
                            <li><a href="signin_org.html">Log out</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <!-- Navbar - Lower -->
    <nav class="navbar navbar-default navbar-fixed-top navbar-lower" role="navigation">
        <div class="container-fluid">
            <div class="collapse navbar-collapse collapse-buttons row">
                <div class="col-md-2">
                    <a href="#team-toggle" class="navbar-left" id="team-toggle"><i class="fa fa-users"></i> Teams</a>

                    <!-- <a href="#" class="navbar-left" id=""><i class="fa fa-plus"></i> Create Team</a> -->
                </div>
                
                <div class="col-md-8">
                    <form class="navbar-form navbar-left search-bar" role="search">
                        <div class="form-group">
                            <span class="search-icon"><i class="fa fa-search"></i></span>
                            <input type="text" class="form-control" placeholder="Enter key words of field report...">
                        </div>
                    </form>
                </div>
                <div class="col-md-2">
                    <a href="#user-toggle" class="navbar-right" id="user-toggle"><i class="fa fa-user"></i> Users</a>

                    <!-- <a href="#" class="navbar-right" id=""><i class="fa fa-plus"></i> Add Users</a> -->
                </div>
            </div>
        </div>
    </nav>
    
    <div id="wrapper" class="wrapper-index">
        <!-- SIDEBAR -->
        <div id="sidebar-teams" class="sidebar-wrapper sidebar-left">
            <ul class="sidebar-nav main">
                <li class="active">
                    <a href="#sub1">
                        <span class="team-name">Team 1</span>
                        <span class="team-notification"><i class="fa fa-circle"></i></span>
                    </a>
                </li>
                <li>
                    <a href="#sub2">
                        <span class="team-name">Team 2</span>
                        <span class="team-notification"><i class="fa fa-circle"></i></span>
                    </a>
                </li>
                <li>
                    <a href="#sub3">
                        <span class="team-name">Team 3</span>
                        <span class="team-notification"><i class="fa fa-circle"></i></span>
                    </a>
                </li>
                <li data-toggle="modal" data-target="#modal-create-team">
                    <a href="#">
                        <span class="team-name">+ Create a team</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- SIDEBAR -->
        <div id="sidebar-users"class="sidebar-wrapper sidebar-left">
            <ul id="sub1" class="sidebar-nav sub active">
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye"></i></span>
                        <span class="user-name">User 1.1</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye-slash"></i></span>
                        <span class="user-name">User 1.2</span>
                    </a>
                </li>
                <li data-toggle="modal" data-target="#modal-invite-members">
                    <a href="#">
                        + Add members to team
                    </a>
                </li>
            </ul>

            <ul id="sub2" class="sidebar-nav sub">
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye"></i></span>
                        <span class="user-name">User 2.1</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye"></i></span>
                        <span class="user-name">User 2.2</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye-slash"></i></span>
                        <span class="user-name">User 2.3</span>
                    </a>
                </li>
                <li data-toggle="modal" data-target="#modal-invite-members">
                    <a href="#">
                        + Add members to team
                    </a>
                </li>
            </ul>

            <ul id="sub3" class="sidebar-nav sub">
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye"></i></span>
                        <span class="user-name">User 3.1</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye-slash"></i></span>
                        <span class="user-name">User 3.2</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="user-visibility"><i class="fa fa-eye"></i></span>
                        <span class="user-name">User 3.3</span>
                    </a>
                </li>
                <li data-toggle="modal" data-target="#modal-invite-members">
                    <a href="#">
                        + Add members to team
                    </a>
                </li>
            </ul>
        </div>

        <!-- REPORT PANEL -->
        <div id="page-content-wrapper">
            <div class="container">

                <!-- Panel 1 -->
                <section class="panel panel-default panel-report">
                    
                    <!-- Modal Target Area -->
                    <a href="view_report.html">
                    <div class="clickable">
                        <div class="panel-heading">
                            <span class="panel-name">Craig Ganssle</span>
                            <span class="panel-time">11:23</span>
                        </div>
                        <div class="panel-body">
                            <div class="row small-gutter">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn1_thumb.jpg">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn2_thumb.jpg">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn3_thumb.jpg">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn4_thumb.jpg">
                            </div>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean massa tellus, tempus at augue at, sodales ornare odio. Nam elementum congue hendrerit. Nulla vitae sem eu risus pellentesque hendrerit. Phasellus at massa cursus, eleifend purus vel, porttitor dui. Fusce ac est faucibus, tempus leo sit amet, ullamcorper dui. Ut vestibulum purus ut pellentesque ornare. Vestibulum lacus massa, interdum non ullamcorper a, porta quis lectus.</p>
                            
                            <!-- Panel Status -->
                            <div class="panel-status">
                                <span class="report-location alignLeft"><i class="fa fa-map-marker"></i> Vancouver</span>

                                <ul class="report-status-list alignRight">
                                    <li class="report-status">
                                        <i class="fa fa-camera"></i> 23
                                    </li>
                                    <li class="report-status">
                                        <i class="fa fa-video-camera"></i> 23
                                    </li>
                                    <li class="report-status">
                                        <i class="fa fa-sort-numeric-asc"></i> 23
                                    </li>
                                    <li class="report-status">
                                        <i class="fa fa-file"></i> 23
                                    </li> 
                                </ul>
                            </div>
                        </div>
                    </div> <!-- .end Modal Target Area -->

                    <!--Comment-->
                    <section class="panel-group sec-comment">
                        <div class="">
                            <div class="accordion-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseComment1" aria-expanded="false" aria-controls="collapseComment1"><i class="fa fa-comment-o"></i> View 23 comments</a>
                                </h4>
                            </div>

                            <div class="panel-collapse collapse" id="collapseComment1">
                                <div class="row-comment">
                                    <span class="comment-name alignLeft">Junya Wang</span>
                                    <span class="comment-time alignRight">11:24</span>
                                    <p>I like the first photo.</p>
                                </div>
                                <div class="row-comment">
                                    <span class="comment-name alignLeft">Jeremy Willemse</span>
                                    <span class="comment-time alignRight">11:24</span>
                                    <p><span class="comment-tag"><a href="#">@junya </a></span>, I like the first photo, too.</p>
                                </div>
                                <div>
                                    <form class="comment-form">
                                        <textarea placeholder="Write a comment..." class="textarea common"></textarea>
                                        <input class="btn btn-success" type="submit" value="Post">
                                    </form>
                                </div>
                            </div><!-- /.panel-collapse-->
                        </div><!-- /.panel-default-->
                    </section><!-- /.panel-group -->
                </section><!-- / panel 1 -->

                <!-- Panel 2 -->
                <section class="panel panel-default panel-report">
                    
                    <!-- Modal Target Area -->
                    <div class="clickable" data-toggle="modal" data-target="#modal-view-report">
                        <div class="panel-heading">
                            <span class="panel-name">Junya Wang</span>
                            <span class="panel-time">11:24</span>
                        </div>
                        <div class="panel-body">
                            <div class="row small-gutter">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn2_thumb.jpg">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn3_thumb.jpg">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn4_thumb.jpg">
                                <img class="col-md-3 col-sm-3 col-xs-3" src="img/photo/corn5_thumb.jpg">
                            </div>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean massa tellus, tempus at augue at, sodales ornare odio. Nam elementum congue hendrerit. Nulla vitae sem eu risus pellentesque hendrerit. Phasellus at massa cursus, eleifend purus vel, porttitor dui. Fusce ac est faucibus, tempus leo sit amet, ullamcorper dui. Ut vestibulum purus ut pellentesque ornare. Vestibulum lacus massa, interdum non ullamcorper a, porta quis lectus.</p>
                            
                            <!-- Panel Status -->
                            <div class="panel-status">
                                <span class="report-location alignLeft"><i class="fa fa-map-marker"></i> Vancouver</span>

                                <ul class="report-status-list alignRight">
                                    <li class="report-status">
                                        <i class="fa fa-camera"></i> 23
                                    </li>
                                    <li class="report-status">
                                        <i class="fa fa-video-camera"></i> 23
                                    </li>
                                    <li class="report-status">
                                        <i class="fa fa-sort-numeric-asc"></i> 23
                                    </li>
                                    <li class="report-status">
                                        <i class="fa fa-file"></i> 23
                                    </li> 
                                </ul>
                            </div>
                        </div>
                    </div> <!-- .end Modal Target Area -->

                    <!--Comment-->
                    <section class="panel-group sec-comment">
                        <div class="">
                            <div class="accordion-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseComment2" aria-expanded="false" aria-controls="collapseComment2"><i class="fa fa-comment-o"></i> View 23 comments</a>
                                </h4>
                            </div>

                            <div class="panel-collapse collapse" id="collapseComment2">
                                <div class="row-comment">
                                    <span class="comment-name alignLeft">Junya Wang</span>
                                    <span class="comment-time alignRight">11:24</span>
                                    <p>I like the first photo.</p>
                                </div>
                                <div class="row-comment">
                                    <span class="comment-name alignLeft">Jeremy Willemse</span>
                                    <span class="comment-time alignRight">11:24</span>
                                    <p><span class="comment-tag"><a href="#">@junya </a></span>, I like the first photo, too.</p>
                                </div>
                                <div>
                                    <form class="comment-form">
                                        <textarea placeholder="Write a comment..." class="textarea common"></textarea>
                                        <input class="btn btn-success" type="submit" value="Post">
                                    </form>
                                </div>
                            </div><!-- /.panel-collapse-->
                        </div><!-- /.panel-default-->
                    </section><!-- /.comment -->
                </section><!-- / panel 2-->

                <div class="bubble bubble-success">
                    <span class="bubble-name alignLeft">Junya Wang</span>
                    <span class="bubble-time alignRight">11:24</span>
                    <p>I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo.</p>
                </div>

                <div class="bubble bubble-default">
                    <span class="bubble-name alignLeft">Jeremy Willemse</span>
                    <span class="bubble-time alignRight">11:25</span>
                    <p><span class="bubble-tag"><a href="#">@junya </a></span>I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo. I like the first photo.</p>
                </div>

                <div class="bubble bubble-success">
                    <span class="bubble-name alignLeft">Junya Wang</span>
                    <span class="bubble-time alignRight">11:24</span>
                    <p><span class="bubble-tag"><a href="#">@jeremy </a></span>I like the first photo.</p>
                </div>

                <div class="bubble bubble-default">
                    <span class="bubble-name alignLeft">Jeremy Willemse</span>
                    <span class="bubble-time alignRight">11:25</span>
                    <p>Oops.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- CHAT -->
    <!-- <div class="navbar navbar-fixed-bottom sec-chat">
        <div class="container">
            <form class="comment-form">
                <textarea placeholder="Send your message here..." class="textarea common"></textarea>
            </form>
        </div>
    </div> -->

    <!-- MODAL - Create New Team -->
    <div class="modal fade" id="modal-create-team" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="container">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1>Create a Team</h1>
                        <p>Please give the new team a name and description.</p>
                    </div>
                    <div class="modal-body">   
                        <form class="row">
                            <div class="form-group col-md-12">
                                <label>Team Name</label>
                                <input type="text" class="form-control" id="inputTeamName" placeholder="">
                            </div>
                            <div class="form-group col-md-12">
                                <label>Team Description</label>
                                <textarea class="form-control"></textarea>
                            </div>
                            <button type="button" class="btn btn-success" id="modal-createTeam-to-assignAdmin-trigger">Next</button>
                        </form>
                    </div>
                </div>
            </div><!-- /modal-dialogue -->
        </div>
    </div>

    <!-- MODAL - Assign Team Admin -->
    <div class="modal fade" id="modal-assign-team-admin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="container">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1>Assign Team Admin</h1>
                        <p>Please assign one or more member as the Team Admin to help you organize this team.</p>
                    </div>
                    <div class="modal-body">   
                        <div class="list-group member-list">
                            <div class="list-group-item clearfix">
                                <span class="list-name">Jeremy Willemse</span>
                                <span class="list-operation pull-right">
                                    <button class="btn btn-default">Assign</button>
                                </span>
                            </div>
                            <div class="list-group-item clearfix">
                                <span class="list-name">Junya Wang</span>
                                <span class="list-operation pull-right">
                                    <button class="btn btn-default">Assign</button>
                                </span>
                            </div>
                            <div class="list-group-item clearfix">
                                <span class="list-name">Guy Davis</span>
                                <span class="list-operation pull-right">
                                    <button class="btn btn-default">Assign</button>
                                </span>
                            </div>

                            <button type="button" class="btn btn-default" id="modal-assignAdmin-to-createTeam-trigger">Back</button>
                            <button type="submit" class="btn btn-success" id="modal-assignAdmin-to-inviteMembers-trigger">Next</button>
                        </div>
                    </div>
                </div>
            </div><!-- /modal-dialogue -->
        </div>
    </div>

    <!-- MODAL - Invite Members -->
    <div class="modal fade" id="modal-invite-members" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="container">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1>Invite Members</h1>
                        <p>Invite members from your organization to join this team.</p>
                    </div>
                    <div class="modal-body">      
                        <div class="list-group member-list">
                            <div class="list-group-item clearfix">
                                <span class="list-name">Jeremy Willemse</span>
                                <span class="list-operation pull-right">
                                    <button class="btn btn-default">Invite</button>
                                </span>
                            </div>
                            <div class="list-group-item clearfix">
                                <span class="list-name">Junya Wang</span>
                                <span class="list-operation pull-right">
                                    <button class="btn btn-default">Invite</button>
                                </span>
                            </div>
                            <div class="list-group-item clearfix">
                                <span class="list-name">Guy Davis</span>
                                <span class="list-operation pull-right">
                                    <button class="btn btn-default">Invite</button>
                                </span>
                            </div>

                            <button type="button" class="btn btn-default" id="modal-inviteMembers-to-assignAdmin-trigger">Back</button>
                            <button type="submit" class="btn btn-success" data-dismiss="modal">Done</button>
                        </div>
                    </div>
                </div>
            </div><!-- /modal-dialogue -->
        </div>
    </div>



    <!-- Import Custom JS-->

    <!-- Menu Toggle Script -->
    <script type="text/javascript">
        $("#team-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggledTeams");
        });

        $("#user-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggledUsers");
        });
    </script>

    <!-- Change Sub Sidebar Content -->
    <script type="text/javascript">
        $(function () {
            $(".main").on("click", "a", function () {
                $(".sub").removeClass("active");
                $($(this).attr("href")).addClass("active");
                console.log($(".sub ul"));
            });
        });
    </script>

    <!-- Modal Toggle -->
    <script type="text/javascript">
        //********** Field Report Workflow *********//

        // Show modal-photo-to-report
        $("#modal-photo-to-report-trigger").click(function(){
            $('#modal-view-photo').modal('hide');
            $('#modal-view-report').modal('show');
        });

        // Show modal-note-to-report
        $("#modal-note-to-report-trigger").click(function(){
            $('#modal-view-note').modal('hide');
            $('#modal-view-report').modal('show');
        });

        // Show modal-report-to-photo
        $("#modal-report-to-photo-trigger").click(function(){
            $('#modal-view-report').modal('hide');
            $('#modal-view-photo').modal('show');
        });

        // Show modal-report-to-note
        $("#modal-report-to-note-trigger").click(function(){
            $('#modal-view-report').modal('hide');
            $('#modal-view-note').modal('show');
        });

        //********** Create Team Workflow *********//

        // Show createTeam-to-assignAdmin
        $("#modal-createTeam-to-assignAdmin-trigger").click(function(){
            $('#modal-assign-team-admin').modal('show');
            $('#modal-create-team').modal('hide');
        });

        // Show assignAdmin-to-createTeam
        $("#modal-assignAdmin-to-createTeam-trigger").click(function(){
            $('#modal-assign-team-admin').modal('hide');
            $('#modal-create-team').modal('show');
        });

        // Show assignAdmin-to-inviteMembers
        $("#modal-assignAdmin-to-inviteMembers-trigger").click(function(){
            $('#modal-assign-team-admin').modal('hide');
            $('#modal-invite-members').modal('show');
        });

        // Show inviteMembers-to-assignAdmin
        $("#modal-inviteMembers-to-assignAdmin-trigger").click(function(){
            $('#modal-assign-team-admin').modal('show');
            $('#modal-invite-members').modal('hide');
        });

        //********** Export Workflow *********//

        // Show report-to-export
        $("#modal-export-trigger").click(function(){
            $('#modal-export').modal('show');
            // $('#modal-view-report').modal('hide');
        });

        $("#modal-export-to-report-trigger").click(function(){
            $('#modal-export').modal('hide');
            $('#modal-view-report').modal('show');
        });
    </script>

    <!-- Share Link - Click to Copy Text -->
    <script type="text/javascript">
        $(document).on('click', '.input-share-link', function(e){
            e.preventDefault(); //for <a>
            $('.paste').val($(this).text());
        });
    </script>

    <!-- Textarea Auto Resize -->
    <script type="text/javascript">
        (function($){    
            //pass in just the context as a $(obj) or a settings JS object
            $.fn.autogrow = function(opts) {
                var that = $(this).css({overflow: 'hidden', resize: 'none'}) //prevent scrollies
                    , selector = that.selector
                    , defaults = {
                        context: $(document) //what to wire events to
                        , animate: true //if you want the size change to animate
                        , speed: 200 //speed of animation
                        , fixMinHeight: true //if you don't want the box to shrink below its initial size
                        , cloneClass: 'autogrowclone' //helper CSS class for clone if you need to add special rules
                        , onInitialize: false //resizes the textareas when the plugin is initialized
                    }
                ;
                opts = $.isPlainObject(opts) ? opts : {context: opts ? opts : $(document)};
                opts = $.extend({}, defaults, opts);
                that.each(function(i, elem){
                    var min, clone;
                    elem = $(elem);
                    //if the element is "invisible", we get an incorrect height value
                    //to get correct value, clone and append to the body. 
                    if (elem.is(':visible') || parseInt(elem.css('height'), 10) > 0) {
                        min = parseInt(elem.css('height'), 10) || elem.innerHeight();
                    } else {
                        clone = elem.clone()
                            .addClass(opts.cloneClass)
                            .val(elem.val())
                            .css({
                                position: 'absolute'
                                , visibility: 'hidden'
                                , display: 'block'
                            })
                        ;
                        $('body').append(clone);
                        min = clone.innerHeight();
                        clone.remove();
                    }
                    if (opts.fixMinHeight) {
                        elem.data('autogrow-start-height', min); //set min height                                
                    }
                    elem.css('height', min);
                    
                    if (opts.onInitialize && elem.length) {
                        resize.call(elem[0]);
                    }
                });
                opts.context
                    .on('keyup paste', selector, resize)
                ;
            
                function resize (e){
                    var box = $(this)
                        , oldHeight = box.innerHeight()
                        , newHeight = this.scrollHeight
                        , minHeight = box.data('autogrow-start-height') || 0
                        , clone
                    ;
                    if (oldHeight < newHeight) { //user is typing
                        this.scrollTop = 0; //try to reduce the top of the content hiding for a second
                        opts.animate ? box.stop().animate({height: newHeight}, opts.speed) : box.innerHeight(newHeight);
                    } else if (!e || e.which == 8 || e.which == 46 || (e.ctrlKey && e.which == 88)) { //user is deleting, backspacing, or cutting
                        if (oldHeight > minHeight) { //shrink!
                            //this cloning part is not particularly necessary. however, it helps with animation
                            //since the only way to cleanly calculate where to shrink the box to is to incrementally
                            //reduce the height of the box until the $.innerHeight() and the scrollHeight differ.
                            //doing this on an exact clone to figure out the height first and then applying it to the
                            //actual box makes it look cleaner to the user
                            clone = box.clone()
                                //add clone class for extra css rules
                                .addClass(opts.cloneClass)
                                //make "invisible", remove height restriction potentially imposed by existing CSS
                                .css({position: 'absolute', zIndex:-10, height: ''}) 
                                //populate with content for consistent measuring
                                .val(box.val()) 
                            ;
                            box.after(clone); //append as close to the box as possible for best CSS matching for clone
                            do { //reduce height until they don't match
                                newHeight = clone[0].scrollHeight - 1;
                                clone.innerHeight(newHeight);
                            } while (newHeight === clone[0].scrollHeight);
                            newHeight++; //adding one back eliminates a wiggle on deletion 
                            clone.remove();
                            box.focus(); // Fix issue with Chrome losing focus from the textarea.
                            
                            //if user selects all and deletes or holds down delete til beginning
                            //user could get here and shrink whole box
                            newHeight < minHeight && (newHeight = minHeight);
                            oldHeight > newHeight && opts.animate ? box.stop().animate({height: newHeight}, opts.speed) : box.innerHeight(newHeight);
                        } else { //just set to the minHeight
                            box.innerHeight(minHeight);
                        }
                    } 
                }
                return that;
            }
        })(jQuery);
        $('textarea').autogrow({onInitialize: true, animate:true});
    </script>

    <!-- .modal-back and .modal-close buttons height = width -->
    <!-- <script type="text/javascript">
    //     var cw = $('.modal-back').width();
    //     $('.modal-back').css({
    //         'height': cw + 'px'
    //     });

    //     var cw = $('.modal-close').width();
    //     $('.modal-close').css({
    //         'height': cw + 'px'
    //     });

    //     var cw = $('.modal-back .btn-default').width();
    //     $('.modal-back .btn-default').css({
    //         'height': cw + 'px'
    //     });

    //     var cw = $('.modal-close .btn-default').width();
    //     $('.modal-close .btn-default').css({
    //         'height': cw + 'px'
    //     });
    // </script> -->
</body>

</html>
